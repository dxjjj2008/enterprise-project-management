# 企业项目管理系统——用户旅程功能测试计划

**文档版本**：v1.0  
**创建日期**：2026-02-10  
**状态**：已评审  
**责任人**：测试团队

---

## 一、测试概述

### 1.1 文档目的

本文档旨在为企业项目管理系统提供一套完整的、可执行的基于用户旅程的功能测试计划。测试计划从终端用户的使用视角出发，覆盖从游客访问到完成项目全生命周期的核心业务流程，确保系统在各种场景下均能稳定运行，满足用户期望。本计划不仅包含手工测试的执行步骤，还提供了自动化测试的实现方案，便于测试团队高效开展测试工作并持续验证系统质量。

### 1.2 测试范围

本次测试覆盖系统的核心功能模块，包括用户认证与授权、项目管理与成员协作、任务看板与协作功能等关键业务场景。测试范围涵盖前端界面的用户交互体验、后端API接口的数据正确性与异常处理能力，以及前后端集成的端到端业务流程。具体而言，用户旅程测试将覆盖游客注册登录、项目创建管理、任务增删改查、成员协作沟通等高频使用场景，确保用户在使用过程中的每一步操作都经过充分验证。

| 测试类型 | 测试范围 | 测试工具 |
|---------|---------|---------|
| 单元测试 | 前端组件、后端API单元 | Vitest、pytest |
| 集成测试 | API接口、数据流 | pytest、httpx |
| 端到端测试 | 完整用户旅程 | Playwright |
| 手工测试 | UI交互、用户体验 | 测试工程师 |

### 1.3 测试目标

本测试计划的核心目标是在系统上线前发现并修复所有功能缺陷，确保用户旅程的每一步都能顺利完成。具体测试目标包括：验证用户注册流程的完整性与数据正确性，确保用户能够成功创建账户并自动登录；验证项目创建与管理流程的正确性，包括项目信息录入、成员添加、权限控制等；验证任务看板的核心功能，包括任务创建、状态流转、拖拽操作、成员指派等；验证前后端集成的稳定性，确保数据在前后端之间正确传输与展示。

---

## 二、测试环境

### 2.1 环境配置

测试环境的正确配置是保证测试结果准确性的前提。测试环境应尽可能模拟生产环境的配置，包括服务器硬件规格、网络环境、数据库配置等，以确保测试结果具有参考价值。

| 环境 | 地址 | 用途 |
|------|------|------|
| 开发环境 | http://localhost:3000（前端）<br>http://localhost:8000（后端） | 开发阶段测试 |
| 测试环境 | 待部署 | 集成测试、回归测试 |
| 预发布环境 | 待部署 | 上线前最终验证 |

### 2.2 测试数据准备

测试过程中需要使用特定的测试数据，包括测试用户、测试项目、测试任务等。建议在测试前初始化标准化的测试数据集，确保测试结果的可重复性。

| 数据类型 | 数据内容 | 用途 |
|---------|---------|------|
| 测试用户 | username: testuser<br>password: testpass123 | 登录测试 |
| 测试用户 | username: testdev<br>password: devpass123 | 多用户场景测试 |
| 测试项目 | name: 测试项目<br>key: TESTP | 项目管理测试 |
| 测试任务 | title: 完成需求分析<br>priority: high | 任务管理测试 |

---

## 三、用户旅程测试用例

### 旅程一：用户注册与首次登录

#### 3.1.1 旅程概述

用户旅程的第一阶段是完成账户注册并首次登录系统。这一旅程的成功与否直接影响用户对系统的第一印象，因此是测试计划中的最高优先级场景。测试需要覆盖用户从访问注册页面到成功进入仪表盘的完整流程，确保每一步的交互都流畅无阻。

#### 3.1.2 测试用例 TC-REG-001：访问首页并进入注册页面

**测试目的**：验证用户能够从首页顺利进入注册页面

**前置条件**：用户已打开首页http://localhost:3000

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 打开浏览器访问 http://localhost:3000 | 页面正常加载，显示首页内容 |
| 2 | 点击页面右上角"注册"按钮 | 页面跳转到 /auth/register |
| 3 | 验证URL地址栏 | 地址显示 http://localhost:3000/auth/register |
| 4 | 验证页面内容 | 显示用户名输入框、邮箱输入框、密码输入框、注册按钮 |

**优先级**：P0  
**测试类型**：手工测试  
**执行人**：测试工程师

#### 3.1.3 测试用例 TC-REG-002：用户注册表单验证

**测试目的**：验证注册表单的数据验证功能正常工作

**前置条件**：用户位于注册页面 /auth/register

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 不填写任何内容，直接点击"注册"按钮 | 显示"请填写完整信息"错误提示 |
| 2 | 输入无效邮箱格式：test@example | 显示"邮箱格式不正确"错误提示 |
| 3 | 输入过短密码：123 | 显示"密码长度至少8位"错误提示 |
| 4 | 输入已存在用户名：testuser | 显示"用户名已被注册"错误提示 |
| 5 | 输入有效数据：username=testnew、email=testnew@example.com、password=password123 | 表单提交成功，页面跳转 |

**优先级**：P0  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/frontend/src/views/auth/Register.test.js`

#### 3.1.4 测试用例 TC-REG-003：用户注册API接口测试

**测试目的**：验证后端注册API的正确性与异常处理能力

**前置条件**：后端服务运行正常，数据库为空或已清理

**执行步骤**：

| 步骤 | 请求方式 | 请求地址 | 请求参数 | 预期结果 |
|------|---------|---------|---------|---------|
| 1 | POST | /api/v1/auth/register | username=newuser、email=new@example.com、password=pass123456 | 返回201状态码，返回用户信息 |
| 2 | POST | /api/v1/auth/register | username=existing、email=existing@example.com、password=pass123456 | 第一次创建成功 |
| 3 | POST | /api/v1/auth/register | username=existing、email=different@example.com、password=pass123456 | 返回400状态码，提示用户名已存在 |
| 4 | POST | /api/v1/auth/register | username=testuser、email=different@example.com、password=pass123456 | 返回400状态码，提示邮箱已存在 |
| 5 | POST | /api/v1/auth/register | username=、email=test@example.com、password=pass123456 | 返回422状态码，参数验证错误 |

**优先级**：P0  
**测试类型**：后端API测试  
**自动化脚本位置**：`src/backend/tests/test_auth.py::TestAuthAPI::test_register_user`

---

### 旅程二：用户登录与状态管理

#### 3.2.1 旅程概述

登录流程是用户进入系统的主要入口，也是保护系统安全的第一道防线。测试需要覆盖正常登录、异常登录、登录状态保持等多种场景，确保系统既方便用户使用，又能有效阻止未授权访问。

#### 3.2.2 测试用例 TC-LOGIN-001：正常登录流程

**测试目的**：验证使用有效凭证能够成功登录并进入系统

**前置条件**：测试用户testuser已存在，密码为testpass123

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 访问 http://localhost:3000/auth/login | 显示登录表单，包含用户名、密码输入框和登录按钮 |
| 2 | 输入用户名：testuser | 输入框正常显示输入内容 |
| 3 | 输入密码：testpass123 | 输入框显示密码掩码 |
| 4 | 点击"登录"按钮 | 页面跳转到 /dashboard，显示用户已登录状态 |
| 5 | 检查localStorage | auth_token已存储，user_info包含用户信息 |

**优先级**：P0  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/frontend/src/views/auth/Login.test.js`

#### 3.2.3 测试用例 TC-LOGIN-002：异常登录处理

**测试目的**：验证系统对错误登录信息的正确处理

**前置条件**：测试用户testuser已存在，密码为testpass123

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 输入错误密码：wrongpass | 显示"用户名或密码错误"提示，停留在登录页 |
| 2 | 输入不存在用户名：nonexist | 显示"用户名或密码错误"提示 |
| 3 | 连续输错5次密码 | 显示验证码要求或账户锁定提示 |
| 4 | 不输入任何内容直接点击登录 | 显示"请输入用户名和密码"提示 |

**优先级**：P0  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/backend/tests/test_auth.py::TestAuthAPI::test_login_wrong_password`

#### 3.2.4 测试用例 TC-LOGIN-003：登录状态持久化

**测试目的**：验证关闭浏览器后再次访问系统仍保持登录状态

**前置条件**：用户已成功登录

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 完成登录操作，检查auth_token已存储 | token存在于localStorage |
| 2 | 刷新当前页面 | 用户保持登录状态，直接进入仪表盘 |
| 3 | 关闭浏览器并重新打开 | 访问首页自动跳转到仪表盘 |
| 4 | 点击"退出登录" | token被清除，返回登录页 |
| 5 | 刷新页面 | 用户保持退出状态，不自动跳转 |

**优先级**：P1  
**测试类型**：手工测试

---

### 旅程三：项目创建与管理

#### 3.3.1 旅程概述

项目管理是系统的核心功能之一，用户通过创建项目来组织和管理工作内容。测试需要覆盖项目的创建、查看、编辑、删除等全生命周期操作，确保项目管理的各个环节都准确无误。

#### 3.3.2 测试用例 TC-PROJ-001：创建新项目

**测试目的**：验证用户能够成功创建新项目

**前置条件**：用户已登录，进入项目管理页面

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 点击导航栏"项目" | 进入项目列表页面 |
| 2 | 点击"创建项目"按钮 | 弹出创建项目表单，包含项目名称、项目Key、描述、起止日期等字段 |
| 3 | 输入项目名称：测试项目 | 输入框正常显示 |
| 4 | 输入项目Key：TESTP | Key自动转为大写，显示格式提示 |
| 5 | 输入描述：这是一个测试项目 | 多行文本框正常显示 |
| 6 | 点击"创建"按钮 | 项目创建成功，显示成功提示，页面刷新显示新项目 |

**优先级**：P0  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/frontend/src/views/projects/List.test.js`

#### 3.3.3 测试用例 TC-PROJ-002：项目Key唯一性校验

**测试目的**：验证系统阻止创建重复Key的项目

**前置条件**：用户已创建项目TESTP

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 进入项目列表页面 | 显示已存在的项目TESTP |
| 2 | 点击"创建项目"按钮 | 弹出创建表单 |
| 3 | 输入项目Key：TESTP | 系统实时校验，显示"Key已存在"提示 |
| 4 | 输入其他Key：DIFFERENT | 提示消失，Key可用 |
| 5 | 尝试提交重复Key | 表单提交失败，显示错误提示 |

**优先级**：P0  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/backend/tests/test_projects.py::TestProjectAPI::test_create_duplicate_key`

#### 3.3.4 测试用例 TC-PROJ-003：项目详情查看

**测试目的**：验证用户能够查看项目详细信息

**前置条件**：用户已创建项目TESTP

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 进入项目列表页面 | 显示项目TESTP |
| 2 | 点击项目TESTP的"查看详情"按钮或项目名称 | 进入项目详情页面 |
| 3 | 验证页面显示内容 | 显示项目名称、描述、Key、状态、起止日期 |
| 4 | 验证统计数据显示 | 显示任务总数、已完成数、进度百分比 |
| 5 | 验证项目成员显示 | 显示项目成员列表，包括角色信息 |

**优先级**：P0  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/backend/tests/test_projects.py::TestProjectAPI::test_get_project_detail`

#### 3.3.5 测试用例 TC-PROJ-004：更新项目信息

**测试目的**：验证用户能够修改项目信息

**前置条件**：用户已创建项目TESTP

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 进入项目TESTP的详情页面 | 显示当前项目信息 |
| 2 | 点击"编辑"按钮 | 进入编辑模式或弹出编辑表单 |
| 3 | 修改项目名称：测试项目-更新版 | 输入框内容更新 |
| 4 | 修改描述：新描述内容 | 多行文本框内容更新 |
| 5 | 点击"保存"按钮 | 显示"保存成功"提示，页面刷新显示新信息 |

**优先级**：P1  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/backend/tests/test_projects.py::TestProjectAPI::test_update_project`

---

### 旅程四：项目成员管理

#### 3.4.1 旅程概述

项目成员管理是团队协作的基础功能。测试需要覆盖成员查看、添加、角色设置、移除等操作，确保团队协作机制正常工作。

#### 3.4.2 测试用例 TC-MEMB-001：查看项目成员列表

**测试目的**：验证用户能够查看项目的所有成员

**前置条件**：用户已创建项目TESTP，并添加了成员

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 进入项目TESTP的详情页面 | 默认显示项目概览 |
| 2 | 点击"成员"标签页 | 显示成员列表 |
| 3 | 验证成员信息显示 | 显示用户名、邮箱、角色、加入时间 |
| 4 | 验证当前用户显示 | 创建者显示为管理员角色 |

**优先级**：P0  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/backend/tests/test_projects.py::TestProjectMemberAPI::test_get_project_members`

#### 3.4.3 测试用例 TC-MEM添加项目成员

B-002：**测试目的**：验证用户能够向项目添加新成员

**前置条件**：存在另一个用户otheruser

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 进入项目TESTP的成员页面 | 显示当前成员列表 |
| 2 | 点击"添加成员"按钮 | 弹出添加成员对话框 |
| 3 | 输入要添加的用户名或邮箱 | 系统搜索并显示匹配用户列表 |
| 4 | 选择用户otheruser | 选中用户显示在选择区 |
| 5 | 点击"确定"按钮 | 其他用户被添加到项目中，成员列表更新 |

**优先级**：P0  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/backend/tests/test_projects.py::TestProjectMemberAPI::test_add_member`

#### 3.4.4 测试用例 TC-MEMB-003：移除项目成员

**测试目的**：验证用户能够从项目中移除成员

**前置条件**：用户otheruser已是项目TESTP的成员

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 进入项目TESTP的成员页面 | 显示包括otheruser在内的成员列表 |
| 2 | 找到otheruser所在行 | 显示操作按钮（移除） |
| 3 | 点击"移除"按钮 | 弹出确认对话框 |
| 4 | 点击"确认移除" | otheruser被移除，成员列表更新 |

**优先级**：P1  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/backend/tests/test_projects.py::TestProjectMemberAPI::test_remove_member`

---

### 旅程五：任务创建与管理

#### 3.5.1 旅程概述

任务管理是企业项目管理系统最核心的功能。测试需要覆盖任务的增删改查、状态流转、成员指派、标签管理、拖拽操作等完整功能，确保任务看板能够有效支撑日常工作。

#### 3.5.2 测试用例 TC-TASK-001：创建新任务

**测试目的**：验证用户能够在项目中创建新任务

**前置条件**：用户已进入项目TESTP的任务看板页面

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 进入项目TESTP的任务看板页面 | 显示Todo、In Progress、Done三列 |
| 2 | 点击Todo列顶部的"添加任务"按钮 | 弹出创建任务表单 |
| 3 | 输入任务标题：完成需求分析 | 标题输入框正常显示 |
| 4 | 输入描述：编写详细的需求文档 | 描述输入框正常显示 |
| 5 | 选择优先级：高 | 优先级选择器正常显示 |
| 6 | 点击"创建"按钮 | 任务出现在Todo列顶部 |

**优先级**：P0  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/frontend/src/views/tasks/Board.test.js`

#### 3.5.3 测试用例 TC-TASK-002：任务状态流转（拖拽操作）

**测试目的**：验证用户能够通过拖拽改变任务状态

**前置条件**：任务"完成需求分析"已在Todo列中

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 将鼠标悬停在任务"完成需求分析"上 | 任务卡片显示拖拽手柄 |
| 2 | 按住鼠标左键拖拽任务到In Progress列 | 任务跟随鼠标移动 |
| 3 | 释放鼠标按钮 | 任务落入In Progress列，状态更新为in_progress |
| 4 | 继续拖拽到Done列 | 任务落入Done列，状态更新为done |
| 5 | 验证后端数据 | 任务API返回的状态与前端显示一致 |

**优先级**：P0  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/frontend/src/views/tasks/Board.test.js::test_drag_task`

#### 3.5.4 测试用例 TC-TASK-003：指派任务给成员

**测试目的**：验证用户能够将任务指派给项目成员

**前置条件**：任务"完成需求分析"存在，成员otheruser已加入项目

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 点击任务"完成需求分析"的详情按钮 | 弹出任务详情面板 |
| 2 | 找到"指派给"字段 | 显示当前无指派人 |
| 3 | 点击"选择成员"下拉框 | 显示项目成员列表 |
| 4 | 选择otheruser | 下拉框显示已选otheruser |
| 5 | 点击"保存"按钮 | 任务卡片显示被指派人的头像或名称 |

**优先级**：P0  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/backend/tests/test_tasks.py::TestTaskAPI::test_create_task_with_assignee`

#### 3.5.5 测试用例 TC-TASK-004：添加任务标签

**测试目的**：验证用户能够为任务添加标签

**前置条件**：项目TESTP中已创建标签Bug、Feature

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 打开任务"完成需求分析"的详情面板 | 显示任务信息 |
| 2 | 找到"标签"字段 | 显示当前无标签或已有标签 |
| 3 | 点击"添加标签"按钮 | 显示可用标签列表 |
| 4 | 选择"Bug"标签 | 标签添加到任务上 |
| 5 | 选择"Feature"标签 | 第二个标签也添加到任务上 |

**优先级**：P1  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/backend/tests/test_tasks.py::TestTaskLabelAPI`

#### 3.5.6 测试用例 TC-TASK-005：任务详情与评论

**测试目的**：验证用户能够在任务详情中添加和查看评论

**前置条件**：任务"完成需求分析"存在

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 打开任务详情面板 | 显示任务完整信息 |
| 2 | 点击"评论"标签 | 切换到评论区域 |
| 3 | 验证现有评论显示 | 显示所有评论，包括作者和时间 |
| 4 | 在评论输入框输入：这是一个评论 | 输入框显示输入内容 |
| 5 | 点击"发送"按钮 | 评论立即显示在评论列表中 |

**优先级**：P1  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/backend/tests/test_tasks.py::TestTaskCommentAPI`

---

### 旅程六：任务筛选与搜索

#### 3.6.1 旅程概述

随着任务数量的增加，筛选和搜索功能变得尤为重要。测试需要验证各种筛选条件的正确性和搜索结果的准确性。

#### 3.6.2 测试用例 TC-SEARCH-001：按状态筛选任务

**测试目的**：验证用户能够通过状态筛选查看特定任务

**前置条件**：项目中有多个状态的任务

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 进入项目任务看板 | 显示所有任务 |
| 2 | 点击筛选器，选择状态：Todo | 只显示Todo列的任务 |
| 3 | 选择状态：In Progress | 只显示In Progress列的任务 |
| 4 | 选择状态：全部 | 显示所有任务 |

**优先级**：P1  
**测试类型**：手工测试、自动化测试  
**自动化脚本位置**：`src/backend/tests/test_tasks.py::TestTaskAPI::test_get_tasks_with_filter`

#### 3.6.3 测试用例 TC-SEARCH-002：按优先级筛选任务

**测试目的**：验证用户能够通过优先级筛选查看特定任务

**前置条件**：项目中有高、中、低不同优先级的任务

**执行步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 进入项目任务看板 | 显示所有任务 |
| 2 | 点击优先级筛选器 | 显示优先级选项 |
| 3 | 选择"高优先级" | 只显示高优先级的任务 |
| 4 | 选择"全部" | 显示所有任务 |

**优先级**：P1  
**测试类型**：手工测试

---

## 四、测试执行计划

### 4.1 测试阶段划分

根据测试计划的整体安排，将测试工作划分为四个主要阶段，每个阶段有明确的目标和交付物，确保测试工作有序推进。

| 阶段 | 时间安排 | 主要内容 | 交付物 |
|------|---------|---------|-------|
| 第一阶段 | 第1-2天 | 核心流程测试（注册、登录、创建项目） | 缺陷报告、测试报告 |
| 第二阶段 | 第3-4天 | 任务管理测试（CRUD、拖拽、协作） | 缺陷报告、测试报告 |
| 第三阶段 | 第5天 | 集成测试、E2E测试 | 测试报告、性能报告 |
| 第四阶段 | 第6天 | 回归测试、上线验证 | 上线检查清单 |

### 4.2 每日测试任务

| 日期 | 测试任务 | 负责人 |
|------|---------|--------|
| 第1天上午 | 用户旅程一：注册登录 | 测试工程师A |
| 第1天下午 | 用户旅程二：项目管理-创建 | 测试工程师A |
| 第2天上午 | 用户旅程二：项目管理-成员管理 | 测试工程师B |
| 第2天下午 | 用户旅程三：任务创建 | 测试工程师A |
| 第3天上午 | 用户旅程三：任务状态流转 | 测试工程师B |
| 第3天下午 | 用户旅程三：任务协作 | 测试工程师A |
| 第4天上午 | 用户旅程四：筛选搜索 | 测试工程师B |
| 第4天下午 | E2E完整旅程测试 | 测试工程师A |
| 第5天 | 回归测试、缺陷验证 | 测试工程师A+B |

---

## 五、缺陷管理

### 5.1 缺陷分级标准

| 严重等级 | 定义 | 响应时间 | 修复期限 |
|---------|------|---------|---------|
| P0-致命 | 核心流程无法进行，如无法注册、无法登录、项目崩溃 | 立即响应 | 4小时 |
| P1-严重 | 主要功能异常，如无法创建任务、任务丢失 | 4小时 | 1工作日 |
| P2-一般 | 次要功能问题，如显示异常、提示错误 | 1工作日 | 3工作日 |
| P3-轻微 | 优化建议、界面微调 | 3工作日 | 下个迭代 |

### 5.2 缺陷报告模板

```markdown
## 缺陷标题
[模块名称]-[操作描述]-[预期与实际差异简述]

## 缺陷描述
- **发现日期**：2026-02-10
- **发现人**：[测试工程师姓名]
- **优先级**：[P0/P1/P2/P3]
- **严重程度**：[致命/严重/一般/轻微]

## 重现步骤
1. 访问页面 [页面地址]
2. 执行操作 [具体操作]
3. 观察结果 [实际发生的情况]

## 预期结果
[原本应该发生的情况]

## 实际结果
[实际发生的情况]

## 环境信息
- 浏览器：Chrome 120
- 操作系统：Windows 11
- 网络环境：局域网

## 截图/日志
[附上相关截图或错误日志]

## 备注
[其他补充说明]
```

---

## 六、自动化测试脚本

### 6.1 前端单元测试脚本

#### 6.1.1 登录页面测试脚本

```javascript
// src/frontend/src/views/auth/Login.test.js
import { describe, it, expect, vi } from 'vitest'
import { mount } from '@vue/test-utils'
import { createRouter, createWebHistory } from 'vue-router'
import Login from './Login.vue'

describe('用户旅程: 登录流程', () => {
  const router = createRouter({
    history: createWebHistory(),
    routes: [{ path: '/auth/login', component: Login }]
  })

  it('TC-LOGIN-001: 登录页面正常渲染', async () => {
    await router.push('/auth/login')
    await router.isReady()
    
    const wrapper = mount(Login, {
      global: {
        plugins: [router]
      }
    })
    
    expect(wrapper.find('input[type="text"]').exists()).toBe(true)
    expect(wrapper.find('input[type="password"]').exists()).toBe(true)
    expect(wrapper.find('button[type="submit"]').exists()).toBe(true)
  })

  it('TC-LOGIN-002: 空表单提交显示验证错误', async () => {
    const wrapper = mount(Login)
    
    await wrapper.find('form').trigger('submit')
    
    expect(wrapper.text()).toContain('请输入用户名')
  })
})
```

#### 6.1.2 任务看板拖拽测试

```javascript
// src/frontend/src/views/tasks/Board.test.js (扩展)
import { describe, it, expect } from 'vitest'
import { mount } from '@vue/test-utils'
import Board from './Board.vue'

describe('用户旅程: 任务拖拽操作', () => {
  it('TC-TASK-002: 拖拽任务改变状态', async () => {
    const wrapper = mount(Board, {
      props: {
        projectId: 1
      }
    })
    
    // 找到Todo列中的第一个任务
    const taskCard = wrapper.find('[data-testid="task-1"]')
    const inProgressColumn = wrapper.find('[data-testid="column-in_progress"]')
    
    // 模拟拖拽
    await taskCard.trigger('dragstart')
    await inProgressColumn.trigger('dragover')
    await inProgressColumn.trigger('drop')
    
    // 验证API调用
    expect(wrapper.emitted('task-status-update')).toBeTruthy()
    expect(wrapper.emitted('task-status-update')[0]).toEqual([1, 'in_progress'])
  })
})
```

### 6.2 后端API测试脚本

#### 6.2.1 认证API完整测试

```python
# src/backend/tests/test_auth_complete.py
"""
认证API完整测试套件
覆盖所有认证相关的API端点
"""

from fastapi.testclient import TestClient
from sqlalchemy.orm import Session
import pytest


class TestAuthComplete:
    """认证API完整测试类"""
    
    def test_register_login_logout_flow(self, client, db_session):
        """完整注册登录登出流程"""
        # 1. 注册新用户
        register_resp = client.post(
            "/api/v1/auth/register",
            data={
                "username": "flowtest",
                "email": "flowtest@example.com",
                "password": "password123"
            }
        )
        assert register_resp.status_code == 200
        assert register_resp.json()["message"] == "User registered successfully"
        
        # 2. 登录获取token
        login_resp = client.post(
            "/api/v1/auth/login",
            data={
                "username": "flowtest",
                "password": "password123"
            }
        )
        assert login_resp.status_code == 200
        token = login_resp.json()["access_token"]
        headers = {"Authorization": f"Bearer {token}"}
        
        # 3. 获取当前用户信息
        me_resp = client.get("/api/v1/auth/me", headers=headers)
        assert me_resp.status_code == 200
        assert me_resp.json()["username"] == "flowtest"
```

### 6.3 端到端测试脚本

#### 6.3.1 Playwright完整用户旅程测试

```python
# tests/e2e/user_journey_complete.spec.js
import { test, expect } from '@playwright/test'

test.describe('用户旅程: 完整业务场景', () => {
  test.beforeEach(async ({ page }) => {
    // 测试前置：确保数据库干净
    await page.goto('http://localhost:3000')
  })

  test('TC-JOURNEY-001: 注册 -> 创建项目 -> 创建任务 -> 完成', async ({ page }) => {
    // 旅程1: 注册新用户
    await page.click('text=注册')
    await page.fill('#username', 'journeytest')
    await page.fill('#email', 'journeytest@example.com')
    await page.fill('#password', 'password123')
    await page.click('button:has-text("注册")')
    
    // 验证进入仪表盘
    await expect(page).toHaveURL(/.*dashboard.*/)
    
    // 旅程2: 创建项目
    await page.click('text=项目')
    await page.click('text=创建项目')
    await page.fill('#name', 'E2E测试项目')
    await page.fill('#key', 'E2ETEST')
    await page.fill('#description', '端到端测试创建的项目')
    await page.click('button:has-text("创建")')
    
    // 验证项目创建成功
    await expect(page.locator('text=E2E测试项目')).toBeVisible()
    
    // 旅程3: 进入项目创建任务
    await page.click('text=E2E测试项目')
    await page.click('text=任务')
    await page.click('text=添加任务')
    await page.fill('#task-title', 'E2E测试任务')
    await page.selectOption('#task-priority', 'high')
    await page.click('button:has-text("创建")')
    
    // 验证任务出现在Todo列
    await expect(page.locator('text=E2E测试任务').first()).toBeVisible()
    
    // 旅程4: 拖拽任务到进行中
    const task = page.locator('text=E2E测试任务').first()
    const inProgressColumn = page.locator('text=进行中').locator('..')
    
    await task.dragTo(inProgressColumn)
    
    // 验证任务状态更新
    await expect(page.locator('text=E2E测试任务').locator('..')).toHaveAttribute('data-status', 'in_progress')
  })
})
```

---

## 七、测试检查清单

### 7.1 上线前检查清单

| 检查项 | 检查内容 | 状态 | 备注 |
|-------|---------|------|------|
| 核心流程 | 用户注册流程测试通过 | ☐ | |
| 核心流程 | 用户登录流程测试通过 | ☐ | |
| 核心流程 | 项目创建流程测试通过 | ☐ | |
| 核心流程 | 任务创建流程测试通过 | ☐ | |
| 核心流程 | 任务拖拽功能测试通过 | ☐ | |
| 安全性 | SQL注入测试通过 | ☐ | |
| 安全性 | XSS攻击测试通过 | ☐ | |
| 安全性 | 未授权访问测试通过 | ☐ | |
| 性能 | 页面加载时间<3秒 | ☐ | |
| 兼容性 | Chrome浏览器测试通过 | ☐ | |
| 兼容性 | Firefox浏览器测试通过 | ☐ | |
| 兼容性 | Safari浏览器测试通过 | ☐ | |
| 缺陷 | 无P0/P1级别未修复缺陷 | ☐ | |
| 文档 | 测试报告已输出 | ☐ | |

### 7.2 每日测试检查项

| 检查项 | 检查方法 | 通过标准 |
|-------|---------|---------|
| 后端测试 | pytest运行全部测试 | 38/38通过 |
| 前端测试 | npm run test运行全部测试 | 15/15通过 |
| 冒烟测试 | 执行核心流程冒烟测试 | 无阻塞问题 |
| 缺陷统计 | 统计新增和关闭缺陷数 | P0/P1缺陷数=0 |

---

## 八、风险与应对措施

### 8.1 风险识别

| 风险项 | 风险描述 | 发生概率 | 影响程度 | 应对措施 |
|-------|---------|---------|---------|---------|
| 测试环境不稳定 | 测试环境频繁宕机导致测试中断 | 低 | 高 | 准备备用测试环境 |
| 测试数据不足 | 缺乏足够的测试数据支撑测试 | 中 | 中 | 提前准备标准化测试数据集 |
| 需求变更 | 测试过程中需求变更导致测试用例调整 | 中 | 中 | 建立需求变更快速响应机制 |
| 人员变动 | 测试工程师临时无法参与测试 | 低 | 中 | 交叉培训，确保测试知识共享 |

### 8.2 应对策略

针对识别出的风险，制定相应的应对策略。对于测试环境不稳定的问题，建议运维团队提供高可用的测试环境支持，并建立环境监控机制；针对测试数据不足的问题，测试团队应在测试开始前完成测试数据的准备和验证工作；针对需求变更的风险，应与产品团队保持密切沟通，及时评估变更影响并调整测试计划；针对人员变动风险，应确保测试用例文档化，并安排B角测试工程师进行交叉学习。

---

## 九、附录

### 9.1 测试环境地址

| 环境 | 前端地址 | 后端地址 | API文档 |
|------|---------|---------|---------|
| 开发环境 | http://localhost:3000 | http://localhost:8000 | http://localhost:8000/docs |
| 测试环境 | 待部署 | 待部署 | 待部署 |

### 9.2 测试账号

| 用途 | 用户名 | 密码 | 角色 |
|------|--------|------|------|
| 测试用户 | testuser | testpass123 | member |
| 开发用户 | testdev | devpass123 | member |
| 管理员用户 | admin | admin123 | admin |

### 9.3 相关文档

| 文档名称 | 位置 |
|---------|------|
| API接口文档 | docs/api/2026-02-08-api.md |
| 测试快速入门 | TESTING_QUICKSTART.md |
| 前端测试示例 | src/frontend/src/views/demo.test.js |
| 后端测试示例 | src/backend/tests/test_auth.py |

---

**文档结束**

**创建人**：测试团队  
**创建日期**：2026-02-10  
**版本**：v1.0

# 计划管理页 - 设计文档

**版本**: v1.0
**创建日期**: 2026-02-10
**更新日期**: 2026-02-10
**状态**: 待实现

---

## 一、页面概述

### 1.1 页面定位

计划管理页提供项目计划的制定、管理和跟踪功能，支持项目里程碑、阶段计划、工作分解结构（WBS）的可视化管理，帮助项目团队清晰规划项目进度。

### 1.2 用户角色

- **项目经理**: 完全权限，可创建、编辑、删除所有计划
- **项目成员**: 查看权限，可创建和编辑自己的任务计划
- **只读用户**: 仅查看权限

### 1.3 页面路径

```
/projects/:id/planning
```

### 1.4 权限控制

| 功能 | 项目经理 | 项目成员 | 只读用户 |
|------|----------|----------|----------|
| 里程碑管理 | ✅ | ✅ | ✅ |
| 阶段计划 | ✅ | ✅ | ✅ |
| WBS树 | ✅ | ✅ | ✅ |
| 基线对比 | ✅ | ❌ | ❌ |
| 计划导入/导出 | ✅ | ❌ | ❌ |

---

## 二、页面布局

### 2.1 整体布局

```
┌─────────────────────────────────────────────────────────────────┐
│  [← 返回]  计划管理                           [+ 新建计划]      │
├─────────────────────────────────────────────────────────────────┤
│  项目名称: 企业项目管理系统                                       │
│  项目Key: PJ123456                                               │
├─────────────────────────────────────────────────────────────────┤
│  [📊 里程碑]  [📅 阶段]  [📋 WBS树]  [📈 基线对比]               │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ Tab 内容区                                                  │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│  面包屑: 首页 / 项目 / 计划管理                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 三、Tab 导航设计

### 3.1 Tab 列表

| Tab | 图标 | 说明 |
|-----|------|------|
| 里程碑 | 🏆 | 项目里程碑管理 |
| 阶段 | 📅 | 项目阶段计划 |
| WBS树 | 📋 | 工作分解结构 |
| 基线对比 | 📈 | 计划与实际对比 |

---

## 四、里程碑 Tab

### 4.1 里程碑列表

```
┌─────────────────────────────────────────────────────────────────┐
│  🏆 里程碑管理                                     [+ 新建里程碑] │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 🏷️ M1 | 📅 2026-01-15 | 状态 | [编辑] [删除]               │ │
│  │  项目启动                                                          │ │
│  │  ████████████████████░░░░░░░░░  100% 完成                       │ │
│  │  📅 2026-01-10                                                │ │
│  │  👤 张三                                                        │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 🏷️ M2 | 📅 2026-01-20 | 状态 | [编辑] [删除]               │ │
│  │  需求分析                                                          │ │
│  │  ████████████████████░░░░░░░░░  100% 完成                       │ │
│  │  📅 2026-01-18                                                │ │
│  │  👤 李四                                                        │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 🏷️ M3 | 📅 2026-02-01 ~ 2026-02-28 | 状态 | [编辑] [删除]   │ │
│  │  设计阶段                                                          │ │
│  │  ████████████████████░░░░░░░░░  60% 进行中                     │ │
│  │  📅 2026-02-05                                                │ │
│  │  👤 王五                                                        │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 🏷️ M4 | 📅 2026-03-01 ~ 2026-03-31 | 状态 | [编辑] [删除]   │ │
│  │  开发阶段                                                          │ │
│  │  ─────────────────────────────────────────────────────────  │ │
│  │  未开始                                                         │ │
│  │  📅 2026-03-01                                                │ │
│  │  👤 张三                                                        │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 4.2 状态说明

| 状态 | 值 | 颜色 | 图标 |
|------|------|------|------|
| 未开始 | not_started | 灰色 | ○ |
| 进行中 | in_progress | 蓝色 | ● |
| 已完成 | completed | 绿色 | ✅ |
| 已逾期 | overdue | 红色 | ❌ |

### 4.3 新建里程碑表单

```
┌─────────────────────────────────────────────┐
│  新建里程碑                               [X] │
├─────────────────────────────────────────────┤
│  里程碑名称                                     │
│  [__________________________________]        │
│  (必填，最多50字符)                           │
│                                                                 │
│  里程碑Key (自动生成)                              │
│  [MXXX_____________________] (只读)             │
│                                                                 │
│  开始日期                                           │
│  [📅 ____________]                                   │
│  (必填)                                               │
│                                                                 │
│  结束日期                                           │
│  [📅 ____________]                                   │
│  (必填，必须 ≥ 开始日期)                             │
│                                                                 │
│  里程碑描述                                           │
│  [__________________________________]        │
│  [__________________________________]        │
│  (可选，最多500字符)                                │
│                                                                 │
├─────────────────────────────────────────────┤
│                          [取消]  [创建]      │
└─────────────────────────────────────────────┘
```

---

## 五、阶段 Tab

### 5.1 阶段列表

```
┌─────────────────────────────────────────────────────────────────┐
│  📅 阶段计划                                     [+ 新建阶段]    │
├─────────────────────────────────────────────────────────────────┤
│  [🔍 搜索阶段...]  [状态筛选 v]  [阶段筛选 v]                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 阶段1: 项目启动 (01-15)                      [编辑] [删除] │ │
│  │ ✅ 已完成  - 进度: ████████████████████░░░░░░ 100%        │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 阶段2: 需求分析 (01-20)                       [编辑] [删除] │ │
│  │ ✅ 已完成  - 进度: ████████████████████░░░░░░ 100%        │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 阶段3: 系统设计 (02-01 ~ 02-28)                   [编辑] [删除] │ │
│  │ 🔄 进行中  - 进度: ████████████████░░░░░░░░░░ 60%         │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 阶段4: 系统开发 (03-01 ~ 03-31)                     [编辑] [删除] │ │
│  │ ⏸️ 暂停  - 进度: ───────────────────────────────────── 0%   │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 5.2 阶段信息卡片

```
┌─────────────────────────────────────────────────────────────────┐
│  阶段详情: 阶段3: 系统设计                    [关闭]             │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 📅 阶段名称: 系统设计                                      │ │
│  │ 📋 阶段Key: PHASE3                                         │ │
│  │ 📊 总进度: ████████████████░░░░░░░░░░  60%                 │ │
│  │ 📅 开始日期: 2026-02-01                                    │ │
│  │ 📅 截止日期: 2026-02-28                                    │ │
│  │ ⏰ 剩余时间: 18天                                          │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  📋 任务列表                                                   │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ ☑ │ 任务名称                  │ 负责人  │ 状态   │ 截止... │ │
│  ├─────────────────────────────────────────────────────────────┤ │
│  │ ☑ │ 设计数据库模型           │ zhangsan│ 进行中 │ 02-05   │ │
│  │ ☑ │ 搭建开发环境             │ lisi    │ 已完成 │ 02-03   │ │
│  │ ☑ │ 编写API接口文档         │ wangwu  │ 已完成 │ 02-08   │ │
│  │ ☐ │ 编写用户手册             │ lisi    │ 待办   │ 02-25   │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  📊 进度统计                                                   │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 总任务数: 4  |  已完成: 2  |  进行中: 1  |  待办: 1  |  完成率: 50% │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 5.3 新建阶段表单

```
┌─────────────────────────────────────────────┐
│  新建阶段                               [X] │
├─────────────────────────────────────────────┤
│  阶段名称                                     │
│  [__________________________________]        │
│  (必填，最多50字符)                           │
│                                                                 │
│  阶段Key (自动生成)                              │
│  [PHASEX___________________] (只读)           │
│                                                                 │
│  开始日期                                           │
│  [📅 ____________]                                   │
│  (必填)                                               │
│                                                                 │
│  截止日期                                           │
│  [📅 ____________]                                   │
│  (必填，必须 ≥ 开始日期)                             │
│                                                                 │
│  负责人                                             │
│  [负责人 v]                                         │
│  - zhangsan                                          │
│  - lisi                                              │
│  - wangwu                                            │
│  - 其他项目成员                                       │
│                                                                 │
│  阶段描述                                           │
│  [__________________________________]        │
│  [__________________________________]        │
│  (可选，最多500字符)                                │
│                                                                 │
├─────────────────────────────────────────────┤
│                          [取消]  [创建]      │
└─────────────────────────────────────────────┘
```

---

## 六、WBS树 Tab

### 6.1 WBS树视图

```
┌─────────────────────────────────────────────────────────────────┐
│  📋 WBS 树                                     [+ 添加WBS]      │
├─────────────────────────────────────────────────────────────────┤
│  [层级缩放] [并排显示] [时间轴显示]                              │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 📁 1.0 项目启动                         [展开/折叠] [编辑] │ │
│  │ ┌─────────────────────────────────────────────────────────┐ │
│  │ │ 📁 1.1 需求收集                         [展开/折叠]     │ │
│  │ │ └─────────────────────────────────────────────────────┐ │
│  │ │   ✅ 1.1.1 编写需求文档                             [删除] │ │
│  │ │   ✅ 1.1.2 需求评审                                 [删除] │ │
│  │ │   ⏸️ 1.1.3 需求变更管理                             [删除] │ │
│  │ └─────────────────────────────────────────────────────┘ │ │
│  │ ┌─────────────────────────────────────────────────────────┐ │
│  │ │ 📁 1.2 项目规划                         [展开/折叠]     │ │
│  │ │ └─────────────────────────────────────────────────────┐ │
│  │ │   ✅ 1.2.1 制定项目计划                             [删除] │ │
│  │ │   ✅ 1.2.2 分配任务                                 [删除] │ │
│  │ └─────────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 📁 2.0 系统设计                         [展开/折叠] [编辑] │ │
│  │ ┌─────────────────────────────────────────────────────────┐ │
│  │ │ 📁 2.1 架构设计                         [展开/折叠]     │ │
│  │ │ └─────────────────────────────────────────────────────┐ │
│  │ │   ✅ 2.1.1 系统架构设计                             [删除] │ │
│  │ │   ✅ 2.1.2 数据库设计                               [删除] │ │
│  │ └─────────────────────────────────────────────────────┘ │ │
│  │ ┌─────────────────────────────────────────────────────────┐ │
│  │ │ 📁 2.2 UI设计                         [展开/折叠]     │ │
│  │ │ └─────────────────────────────────────────────────────┐ │
│  │ │   ✅ 2.2.1 设计规范制定                             [删除] │ │
│  │ │   ✅ 2.2.2 组件设计                                 [删除] │ │
│  │ └─────────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 📁 3.0 系统开发                         [展开/折叠] [编辑] │ │
│  │ └─────────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 📁 4.0 系统测试                         [展开/折叠] [编辑] │ │
│  │ └─────────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 6.2 WBS 操作

| 操作 | 说明 |
|------|------|
| 展开/折叠 | 展示/隐藏子任务 |
| 编辑 | 编辑当前节点信息 |
| 删除 | 删除当前节点 |
| 添加子节点 | 在当前节点下添加子任务 |
| 上移/下移 | 调整层级顺序 |
| 缩放 | 调整时间轴显示比例 |
| 并排/时间轴 | 切换WBS显示模式 |

### 6.3 新建WBS节点

```
┌─────────────────────────────────────────────┐
│  新建WBS节点                           [X] │
├─────────────────────────────────────────────┤
│  节点名称                                     │
│  [__________________________________]        │
│  (必填，最多100字符)                         │
│                                                                 │
│  节点类型                                       │
│  [节点类型 v]                                    │
│  - 里程碑                                          │
│  - 任务                                            │
│  - 阶段                                          │
│  - 可交付成果                                    │
│                                                                 │
│  负责人                                             │
│  [负责人 v]                                         │
│  - zhangsan                                          │
│  - lisi                                              │
│  - wangwu                                            │
│  - 其他项目成员                                       │
│                                                                 │
│  截止日期                                           │
│  [📅 ____________]                                   │
│  (必填，可选默认为阶段结束日期)                       │
│                                                                 │
│  负责人                                             │
│  [承担人 v]                                           │
│  - zhangsan                                          │
│  - lisi                                              │
│  - wangwu                                            │
│  - 其他项目成员                                       │
│                                                                 │
│  描述                                               │
│  [__________________________________]        │
│  [__________________________________]        │
│  (可选，最多500字符)                                │
│                                                                 │
├─────────────────────────────────────────────┤
│                          [取消]  [创建]      │
└─────────────────────────────────────────────┘
```

---

## 七、基线对比 Tab

### 7.1 基线列表

```
┌─────────────────────────────────────────────────────────────────┐
│  📈 基线对比                                 [+ 创建基线]      │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 基线名称: 项目启动基线                         [查看详情]   │ │
│  │ 创建时间: 2026-01-10                                     │ │
│  │ 状态: ✅ 激活                                            │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 基线名称: V1.0                                            │ │
│  │ 创建时间: 2026-01-20                                     │ │
│  │ 状态: ⏸️ 已存档                                          │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 基线名称: V1.1                                            │ │
│  │ 创建时间: 2026-02-05                                     │ │
│  │ 状态: ⏸️ 已存档                                          │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 7.2 基线详情对比

```
┌─────────────────────────────────────────────────────────────────┐
│  基线详情: 项目启动基线                                 [关闭]     │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 里程碑                对比              状态              │ │
│  ├─────────────────────────────────────────────────────────────┤ │
│  │ 🏆 M1 项目启动       01-15          01-15          ✅ 已完成│ │
│  │ 🏆 M2 需求分析       01-20          01-20          ✅ 已完成│ │
│  │ 🏆 M3 设计阶段       02-01 ~ 02-28  02-01 ~ 02-28  🔄 进行中│ │
│  │ 🏆 M4 开发阶段       03-01 ~ 03-31  03-01 ~ 03-31  ⏸️ 未开始│ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  📊 总体进度                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 基线计划: ████████████░░░░░░░░░░░  60%                   │ │
│  │ 实际进度: ████████████░░░░░░░░░░░  45%                   │ │
│  │ 偏差: ───────────────────────────────────── 15%           │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 7.3 偏差说明

| 偏差类型 | 说明 |
|----------|------|
| 正偏差 | 实际进度领先于基线计划 |
| 负偏差 | 实际进度落后于基线计划 |
| 零偏差 | 实际进度与基线计划一致 |

---

## 八、API 接口

| 方法 | 路径 | 说明 |
|------|------|------|
| GET | /api/v1/projects/{id}/milestones | 获取里程碑列表 |
| POST | /api/v1/projects/{id}/milestones | 创建里程碑 |
| PUT | /api/v1/projects/{id}/milestones/{id} | 更新里程碑 |
| DELETE | /api/v1/projects/{id}/milestones/{id} | 删除里程碑 |
| GET | /api/v1/projects/{id}/phases | 获取阶段列表 |
| POST | /api/v1/projects/{id}/phases | 创建阶段 |
| PUT | /api/v1/projects/{id}/phases/{id} | 更新阶段 |
| DELETE | /api/v1/projects/{id}/phases/{id} | 删除阶段 |
| GET | /api/v1/projects/{id}/wbs | 获取WBS树 |
| POST | /api/v1/projects/{id}/wbs | 创建WBS节点 |
| PUT | /api/v1/projects/{id}/wbs/{id} | 更新WBS节点 |
| DELETE | /api/v1/projects/{id}/wbs/{id} | 删除WBS节点 |
| GET | /api/v1/projects/{id}/baselines | 获取基线列表 |
| POST | /api/v1/projects/{id}/baselines | 创建基线 |

---

## 九、设计原则

### 9.1 清晰性

- 层次结构清晰，易于理解
- 节点关系明确
- 状态信息直观展示

### 9.2 灵活性

- 支持多种显示模式
- 支持自定义计划结构
- 支持导入/导出

### 9.3 交互性

- 拖拽排序
- 快速编辑
- 实时更新

### 9.4 可视化

- 进度条显示
- 里程碑标记
- 差异对比

---

## 十、注意事项

### 10.1 数据一致性

- WBS与任务严格对应
- 里程碑与阶段关联
- 基线与实际同步

### 10.2 权限控制

- 只有项目经理可创建基线
- 成员可编辑自己的任务
- 只读用户仅查看

### 10.3 性能优化

- WBS树使用虚拟滚动
- 大树形结构懒加载
- 搜索结果缓存

---

**文档结束**

**创建人**: 设计团队
**创建日期**: 2026-02-10
**版本**: v1.0

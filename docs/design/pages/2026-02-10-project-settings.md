# 项目设置页 - 设计文档

**版本**: v1.0
**创建日期**: 2026-02-10
**更新日期**: 2026-02-10
**状态**: 待实现

---

## 一、页面概述

### 1.1 页面定位

项目设置页是项目的配置管理入口，提供项目的各项配置选项，帮助项目经理和团队成员调整项目设置、管理项目权限、配置项目通知等。

### 1.2 用户角色

- **项目经理**: 拥有全部设置权限
- **项目成员**: 拥有部分设置权限（如修改成员、配置通知）
- **只读用户**: 无设置权限

### 1.3 页面路径

```
/projects/:id/settings
```

### 1.4 权限控制

| 功能 | 项目经理 | 项目成员 | 只读用户 |
|------|----------|----------|----------|
| 基本设置 | ✅ | ❌ | ❌ |
| 成员管理 | ✅ | ⚠️ (仅移除成员) | ❌ |
| 通知设置 | ✅ | ✅ | ❌ |
| 主题设置 | ✅ | ✅ | ✅ |
| 数据导入/导出 | ✅ | ❌ | ❌ |
| 删除项目 | ✅ | ❌ | ❌ |

---

## 二、页面布局

### 2.1 整体布局

```
┌─────────────────────────────────────────────────────────────────┐
│  [← 返回]  项目设置                       [⋮更多 v]              │
├─────────────────────────────────────────────────────────────────┤
│  项目名称: 企业项目管理系统                                       │
│  项目Key: PJ123456                                               │
├─────────────────────────────────────────────────────────────────┤
│  [📋 基本设置]  [👥 成员]  [🔔 通知]  [⚙️ 其他]                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Tab 内容区                                                      │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│  面包屑: 首页 / 项目 / 项目设置                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 三、Tab 导航设计

### 3.1 Tab 列表

| Tab | 图标 | 说明 |
|-----|------|------|
| 基本设置 | 📋 | 项目基本信息、描述、日期 |
| 成员 | 👥 | 项目成员管理 |
| 通知 | 🔔 | 通知配置 |
| 其他 | ⚙️ | 数据导入/导出、删除项目 |

### 3.2 Tab 交互

- 单击Tab切换内容
- 快捷键 Alt+数字快速切换
- 悬停显示提示

---

## 四、基本设置 Tab

### 4.1 表单布局

```
┌─────────────────────────────────────────────────────────────────┐
│  📋 基本设置                                    [保存修改]      │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  项目名称                                                         │
│  [________________________________________________]            │
│  (2-100字符，必填)                                              │
│                                                                 │
│  项目Key (只读)                                                  │
│  [PJ123456____________________________] (只读)                │
│                                                                 │
│  项目描述                                                         │
│  [________________________________________________]            │
│  [________________________________________________]            │
│  (最多1000字符，可选)                                            │
│                                                                 │
│  开始日期                                                         │
│  [📅 ____________]                                             │
│  (可选，默认今天)                                                │
│                                                                 │
│  结束日期                                                         │
│  [📅 ____________]                                             │
│  (可选，必须 ≥ 开始日期)                                         │
│                                                                 │
│  项目状态                                                         │
│  [项目状态 v]                                                   │
│  - 规划中 (planning)
│  - 进行中 (active)
│  - 已暂停 (on_hold)
│  - 已完成 (completed)
│  - 已归档 (archived)                                           │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                          [取消]  [保存修改]                      │
└─────────────────────────────────────────────────────────────────┘
```

### 4.2 表单验证规则

| 字段 | 规则 | 错误提示 |
|------|------|----------|
| 项目名称 | 2-100字符，必填 | 项目名称至少2个字符 |
| 项目Key | 只读，自动生成 | - |
| 项目描述 | 最多1000字符，可选 | 项目描述最多1000字符 |
| 开始日期 | 可选，默认今天 | - |
| 结束日期 | 必须 ≥ 开始日期 | 结束日期必须大于等于开始日期 |
| 项目状态 | 必填 | 请选择项目状态 |

### 4.3 状态标签颜色

| 状态 | 值 | 颜色 | 说明 |
|------|------|------|------|
| 规划中 | planning | info | 蓝色 #1890FF |
| 进行中 | active | success | 绿色 #52C41A |
| 已暂停 | on_hold | warning | 黄色 #FAAD14 |
| 已完成 | completed | success | 绿色 #52C41A |
| 已归档 | archived | default | 灰色 #8C8C8C |

---

## 五、成员管理 Tab

### 5.1 成员列表布局

```
┌─────────────────────────────────────────────────────────────────┐
│  👥 成员管理                                     [+ 添加成员]    │
├─────────────────────────────────────────────────────────────────┤
│  [🔍 搜索成员...]  [角色筛选 v]  [部门筛选 v]                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ 👤 张三         管理员 (owner)      开发部        [移除]   │ │
│  │ 👤 李四         成员 (member)      测试部        [移除]   │ │
│  │ 👤 王五         成员 (member)      产品部        [移除]   │ │
│  │ ...                                                           │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│  成员统计: 共8人 - 管理员1人 - 成员7人                          │
└─────────────────────────────────────────────────────────────────┘
```

### 5.2 添加成员弹窗

```
┌─────────────────────────────────────────────┐
│  添加项目成员                            [X] │
├─────────────────────────────────────────────┤
│  搜索用户                                     │
│  [🔍 ___________________]                    │
│  (支持搜索用户名、邮箱)                      │
│                                               │
│  搜索结果:                                    │
│  ┌─────────────────────────────────────┐   │
│  │ 👤 testuser (testuser@example.com) │   │
│  │     [选择]                          │   │
│  └─────────────────────────────────────┘   │
│  ┌─────────────────────────────────────┐   │
│  │ 👤 otheruser (other@example.com)   │   │
│  │     [选择]                          │   │
│  └─────────────────────────────────────┘   │
│                                               │
│  角色选择                                     │
│  [角色 v]                                    │
│  - 管理员 (owner)                            │
│  - 成员 (member)                             │
│                                               │
├─────────────────────────────────────────────┤
│                          [取消]  [添加]      │
└─────────────────────────────────────────────┘
```

### 5.3 角色权限说明

| 角色 | 权限范围 |
|------|----------|
| 管理员 | 拥有项目全部权限，可以移除其他成员 |
| 成员 | 拥有项目查看权限，可编辑部分内容，不能移除其他成员 |
| 只读 | 仅查看项目内容，无编辑权限 |

---

## 六、通知设置 Tab

### 6.1 通知类型列表

```
┌─────────────────────────────────────────────────────────────────┐
│  🔔 通知设置                                    [保存配置]      │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  📧 邮件通知                                                     │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ ☑ 项目更新                                               │ │
│  │ ☑ 任务分配                                               │ │
│  │ ☑ 任务状态变更                                           │ │
│  │ ☑ 截止日期提醒                                           │ │
│  │ ☑ 审批请求                                               │ │
│  │ ☑ 系统公告                                               │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  📱 飞书通知                                                     │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ ☑ 项目更新                                               │ │
│  │ ☑ 任务分配                                               │ │
│  │ ☑ 任务状态变更                                           │ │
│  │ ☑ 截止日期提醒                                           │ │
│  │ ☑ 审批请求                                               │ │
│  │ ☑ 系统公告                                               │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  📊 通知频率                                                   │
│  [通知频率 v]                                                 │
│  - 实时通知（有新消息立即发送）                                │
│  - 每日汇总（每天8点发送）                                    │
│  - 每周汇总（每周一8点发送）                                  │
│  - 禁用通知                                                   │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                          [取消]  [保存配置]                      │
└─────────────────────────────────────────────────────────────────┘
```

### 6.2 通知类型说明

| 通知类型 | 说明 | 触发条件 |
|----------|------|----------|
| 项目更新 | 项目信息变更通知 | 项目名称、描述、状态等更新 |
| 任务分配 | 新任务分配通知 | 被分配为新任务 |
| 任务状态变更 | 任务状态变化通知 | 任务状态从Todo→In Progress等 |
| 截止日期提醒 | 截止日期临近提醒 | 截止日期前1天、3天、7天 |
| 审批请求 | 审批任务通知 | 有新的审批任务 |
| 系统公告 | 项目公告通知 | 管理员发布项目公告 |

---

## 七、其他设置 Tab

### 7.1 数据导入/导出

```
┌─────────────────────────────────────────────────────────────────┐
│  ⚙️ 其他设置                                    [保存配置]      │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  📥 数据导入                                                    │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                                                           │ │
│  │    ┌─────────────┐                                        │ │
│  │    │ 选择文件... │                                        │ │
│  │    └─────────────┘                                        │ │
│  │                                                           │ │
│  │    支持格式: .json, .csv                                  │ │
│  │                                                           │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  📤 数据导出                                                    │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ [导出项目信息] [导出任务列表] [导出统计数据]              │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  🗑️ 删除项目                                                    │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ ⚠️ 删除项目是危险操作，请谨慎！                            │ │
│  │                                                           │ │
│  │ [输入项目Key确认删除] [取消]                               │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                          [取消]  [保存配置]                      │
└─────────────────────────────────────────────────────────────────┘
```

### 7.2 数据导入格式

**JSON 格式示例**:
```json
{
  "name": "导入的项目名称",
  "description": "项目描述",
  "start_date": "2026-02-15",
  "end_date": "2026-06-30"
}
```

---

## 八、组件状态

| 状态 | 说明 |
|------|------|
| 空状态 | - |
| 加载中 | Element Plus Skeleton |
| 加载失败 | "加载失败，点击重试" |
| 保存成功 | "保存成功" (1秒后自动关闭) |
| 保存失败 | 显示错误提示 |

---

## 九、API 接口

| 方法 | 路径 | 说明 |
|------|------|------|
| GET | /api/v1/projects/{id}/settings | 获取项目设置 |
| PUT | /api/v1/projects/{id}/settings | 更新项目设置 |
| POST | /api/v1/projects/{id}/members | 添加项目成员 |
| DELETE | /api/v1/projects/{id}/members/{user_id} | 移除项目成员 |
| POST | /api/v1/projects/{id}/import | 导入项目数据 |
| GET | /api/v1/projects/{id}/export/{type} | 导出项目数据 |
| DELETE | /api/v1/projects/{id} | 删除项目 |

---

## 十、设计原则

### 10.1 简洁性

- 设置项分组清晰，避免信息过载
- 只显示当前用户有权限的操作
- 减少必填项，降低用户填写负担

### 10.2 一致性

- 使用与项目详情页一致的设计语言
- 保持与系统其他设置页面的风格统一
- 统一的表单验证和错误提示

### 10.3 效率性

- 提供"保存修改"快捷保存功能
- 支持批量操作（如批量添加成员）
- 提供数据模板，简化导入操作

### 10.4 安全性

- 删除项目需要二次确认
- 敏感操作（如删除项目）需要输入项目Key
- 操作结果及时反馈

---

## 十一、交互流程

### 11.1 修改基本设置

```
用户打开设置页
  ↓
显示当前设置（加载中）
  ↓
用户修改项目名称
  ↓
用户点击"保存修改"
  ↓
系统验证表单（必填项、日期范围）
  ↓
验证通过 → 保存到后端 → 显示"保存成功" → 刷新页面
  ↓
验证失败 → 显示错误提示 → 保持当前数据
```

### 11.2 添加成员

```
用户进入成员管理Tab
  ↓
点击"+ 添加成员"
  ↓
显示搜索框
  ↓
用户输入用户名搜索
  ↓
显示搜索结果列表
  ↓
用户选择成员，设置角色
  ↓
点击"添加"
  ↓
系统验证（用户是否存在、角色是否有效）
  ↓
验证通过 → 添加成功 → 成员列表刷新
  ↓
验证失败 → 显示错误提示
```

### 11.3 导入数据

```
用户进入其他设置Tab
  ↓
点击"数据导入"
  ↓
选择文件
  ↓
系统验证文件格式
  ↓
验证通过 → 显示导入进度 → 导入完成
  ↓
验证失败 → 显示错误提示（文件格式错误、数据校验失败）
```

---

## 十二、注意事项

### 12.1 权限控制

- 管理员可以移除其他成员
- 成员只能移除自己
- 只读用户无法修改任何设置

### 12.2 数据一致性

- 修改项目状态会影响任务状态
- 修改项目日期可能影响任务截止日期
- 删除项目前需要确认

### 12.3 性能考虑

- 成员列表使用虚拟滚动（超过50人）
- 搜索结果使用防抖（300ms）
- 导入大文件使用进度条

---

**文档结束**

**创建人**: 设计团队
**创建日期**: 2026-02-10
**版本**: v1.0

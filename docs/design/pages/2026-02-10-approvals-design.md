# 审批管理页面详细设计方案

**版本**: v1.0  
**创建日期**: 2026-02-10  
**优先级**: P0  
**复杂度**: 低  
**预计页数**: 1

---

## 1. 页面概述

### 1.1 页面定位

审批管理页面是企业项目管理系统中处理各类审批事项的核心页面，主要用于展示用户待处理的审批申请以及已完成的审批历史记录。

### 1.2 目标用户

- 项目经理：查看项目相关审批进度
- 普通员工：提交审批申请，查看个人审批历史
- 管理员：处理所有审批事项

### 1.3 核心功能

- 待办审批列表展示
- 已完成审批历史查询
- 审批详情查看
- 审批通过/拒绝操作
- 审批流程状态跟踪

---

## 2. 页面布局设计

### 2.1 整体布局结构

```
┌─────────────────────────────────────────────────────────────────────┐
│  页面标题栏                                                          │
│  [ 审批管理 ]                                         [新建审批按钮]  │
├─────────────────────────────────────────────────────────────────────┤
│  筛选区域                                                            │
│  [审批类型▼] [状态▼] [时间范围▼] [搜索框🔍]          [重置] [查询]  │
├─────────────────────────────────────────────────────────────────────┤
│  统计卡片                                                            │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐             │
│  │ 待审批   │ │ 已通过   │ │ 已拒绝   │ │ 审批中   │             │
│  │    5    │ │   23     │ │    3     │ │    2     │             │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘             │
├─────────────────────────────────────────────────────────────────────┤
│  审批列表                                                            │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ tabs: [全部] [待办] [已办]                                   │   │
│  ├─────────────────────────────────────────────────────────────┤   │
│  │  表格数据展示区域                                             │   │
│  │  - 申请类型  - 申请人  - 关联项目  - 提交时间  - 状态  - 操作│   │
│  └─────────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────────┤
│  分页组件                                                            │
│  [上一页] [1] [2] [3] [...] [下一页]                       共100条 │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.2 页面尺寸规范

- 页面容器最大宽度：1440px
- 页面左右内边距：24px
- 筛选区域高度：56px
- 统计卡片区域高度：100px
- 表格行高：56px
- 分页区域高度：56px

---

## 3. 功能模块详细设计

### 3.1 页面标题栏

#### 3.1.1 设计规范

| 元素 | 样式规范 |
|------|----------|
| 页面标题 | 字体大小：24px，字重：600，颜色：#262626 |
| 副标题（可选） | 字体大小：14px，字重：400，颜色：#595959 |
| 操作按钮 | 主按钮类型：primary，文字："新建审批" |

#### 3.1.2 功能说明

- **新建审批按钮**：点击后弹出审批类型选择对话框

### 3.2 筛选区域

#### 3.2.1 筛选条件

| 筛选项 | 控件类型 | 默认值 | 选项 |
|--------|----------|--------|------|
| 审批类型 | 下拉选择框 | 全部 | 请假、出差、报销、采购、项目立项、项目变更 |
| 审批状态 | 下拉选择框 | 全部 | 全部、待审批、审批中、已通过、已拒绝、已撤销 |
| 时间范围 | 日期范围选择器 | 最近7天 | 最近7天、最近30天、本月、上月、自定义 |
| 关键词搜索 | 文本输入框 | 空 | 支持审批标题、申请人、关联项目搜索 |

#### 3.2.2 操作按钮

- **重置按钮**：点击后将所有筛选条件恢复为默认值
- **查询按钮**：点击后根据筛选条件刷新列表数据

### 3.3 统计卡片区域

#### 3.3.1 统计指标

| 指标名称 | 数据类型 | 颜色标识 | 计算逻辑 |
|----------|----------|----------|----------|
| 待审批 | 数字 | 警告色 #FAAD14 | 状态为"待审批"的审批数量 |
| 已通过 | 数字 | 成功色 #52C41A | 状态为"已通过"的审批数量 |
| 已拒绝 | 数字 | 危险色 #FF4D4F | 状态为"已拒绝"的审批数量 |
| 审批中 | 数字 | 信息色 #1890FF | 状态为"审批中"的审批数量 |

#### 3.3.2 卡片交互

- 点击卡片跳转到对应状态的审批列表（自动应用筛选条件）

### 3.4 审批列表区域

#### 3.4.1 Tab标签页

| Tab名称 | 含义 | 默认选中 |
|---------|------|----------|
| 全部 | 显示所有审批 | 否 |
| 待办 | 显示待处理的审批 | 是 |
| 已办 | 显示已处理的审批 | 否 |

#### 3.4.2 表格列设计

| 列名称 | 列宽度 | 数据来源 | 对齐方式 | 特殊样式 |
|--------|--------|----------|----------|----------|
| 申请类型 | 120px | 审批类型字段 | 居左 | 标签样式 |
| 审批标题 | 280px | 申请标题 | 居左 | 超链接样式 |
| 申请人 | 100px | 申请人姓名+头像 | 居左 | 头像+姓名 |
| 关联项目 | 150px | 项目名称 | 居左 | 超链接样式 |
| 提交时间 | 160px | 提交时间 | 居左 | 日期格式 |
| 当前节点 | 120px | 审批节点名称 | 居左 | 标签样式 |
| 状态 | 100px | 审批状态 | 居左 | 状态标签 |
| 操作 | 150px | 操作按钮组 | 居右 | 按钮组 |

#### 3.4.3 状态标签样式

| 状态 | 标签类型 | 颜色值 |
|------|----------|--------|
| 待审批 | warning | #FAAD14 |
| 审批中 | primary | #1890FF |
| 已通过 | success | #52C41A |
| 已拒绝 | danger | #FF4D4F |
| 已撤销 | info | #8C8C8C |

#### 3.4.4 操作按钮

| 按钮类型 | 按钮文字 | 可见条件 |
|----------|----------|----------|
| 详情按钮 | 查看 | 始终可见 |
| 操作按钮 | 处理/查看 | 待办：处理；已办：查看 |

### 3.5 审批详情弹窗

#### 3.5.1 弹窗结构

```
┌─────────────────────────────────────────────────────────┐
│  审批详情 - [审批标题]                      [× 关闭]    │
├─────────────────────────────────────────────────────────┤
│  基本信息区域                                               │
│  ┌─────────────┬─────────────┬─────────────┐          │
│  │ 申请人：张三 │ 部门：技术部 │ 提交时间：...│          │
│  └─────────────┴─────────────┴─────────────┘          │
├─────────────────────────────────────────────────────────┤
│  审批流程区域                                               │
│  节点1[张三] → 节点2[李四] → 当前节点[王五] → 结束节点    │
│  ┌─────────────────────────────────────────────────┐    │
│  │  [时间线组件展示完整审批流程]                      │    │
│  └─────────────────────────────────────────────────┘    │
├─────────────────────────────────────────────────────────┤
│  申请内容区域                                               │
│  ┌─────────────────────────────────────────────────┐    │
│  │  [表单详情展示区域]                               │    │
│  └─────────────────────────────────────────────────┘    │
├─────────────────────────────────────────────────────────┤
│  审批意见区域（待办状态显示）                              │
│  ┌─────────────────────────────────────────────────┐    │
│  │  [意见输入框]                                     │    │
│  │  [通过] [拒绝] [退回上一步] [取消]                │    │
│  └─────────────────────────────────────────────────┘    │
│  审批记录区域（已办状态显示）                              │
│  ┌─────────────────────────────────────────────────┐    │
│  │  [审批意见记录列表]                               │    │
│  └─────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────┘
```

#### 3.5.2 审批流程时间线组件

- **节点样式**：圆形节点，已完成节点显示勾选图标，当前节点高亮显示
- **连线样式**：实线表示已完成，虚线表示待执行
- **节点信息**：包含审批人姓名、审批时间、审批结果

### 3.6 新建审批弹窗

#### 3.6.1 审批类型选择

| 审批类型 | 图标 | 说明 |
|----------|------|------|
| 请假 | Calendar | 包含请假类型、开始结束时间、请假事由 |
| 报销 | Money | 包含报销金额、费用明细、发票上传 |
| 出差 | Location | 包含出差时间、地点、行程安排 |
| 采购 | ShoppingCart | 包含采购物品、数量、预算 |
| 项目立项 | FolderAdd | 包含项目名称、项目预算、预期成果 |
| 项目变更 | Edit | 包含变更内容、变更原因、影响分析 |

---

## 4. 交互设计

### 4.1 页面加载流程

```
页面加载 → 显示骨架屏 → 请求API数据 → 渲染统计卡片 → 渲染审批列表 → 完成
```

### 4.2 筛选交互

1. 用户选择筛选条件
2. 自动或点击查询按钮后触发数据刷新
3. 显示加载状态
4. 刷新列表数据

### 4.3 审批操作交互

1. 用户点击"处理"按钮
2. 弹出审批详情弹窗
3. 用户查看申请内容
4. 输入审批意见
5. 选择操作（通过/拒绝/退回）
6. 确认操作
7. 显示处理结果
8. 刷新列表数据

### 4.4 快捷键支持

| 快捷键 | 功能 |
|--------|------|
| Ctrl/Cmd + N | 新建审批 |
| Ctrl/Cmd + R | 刷新列表 |
| Enter | 确认操作 |
| Escape | 关闭弹窗 |

---

## 5. 数据接口设计

### 5.1 API接口列表

| 接口名称 | 请求方式 | 路径 | 说明 |
|----------|----------|------|------|
| 获取审批列表 | GET | /api/v1/approvals | 支持分页和筛选 |
| 获取审批详情 | GET | /api/v1/approvals/{id} | 获取单个审批详情 |
| 获取审批统计 | GET | /api/v1/approvals/stats | 获取审批统计数据 |
| 审批通过 | POST | /api/v1/approvals/{id}/approve | 审批通过操作 |
| 审批拒绝 | POST | /api/v1/approvals/{id}/reject | 审批拒绝操作 |
| 审批退回 | POST | /api/v1/approvals/{id}/return | 退回上一步操作 |
| 新建审批 | POST | /api/v1/approvals | 创建新审批申请 |
| 获取审批类型 | GET | /api/v1/approvals/types | 获取审批类型列表 |

### 5.2 数据字段说明

#### 审批列表数据字段

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | number | 审批ID |
| type | string | 审批类型 |
| title | string | 审批标题 |
| applicant_id | number | 申请人ID |
| applicant_name | string | 申请人姓名 |
| applicant_avatar | string | 申请人头像 |
| project_id | number | 关联项目ID |
| project_name | string | 关联项目名称 |
| current_node | string | 当前审批节点 |
| status | string | 审批状态 |
| created_at | datetime | 提交时间 |
| updated_at | datetime | 更新时间 |

#### 审批详情数据字段

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | number | 审批ID |
| type | string | 审批类型 |
| title | string | 审批标题 |
| applicant | object | 申请人信息 |
| form_data | object | 申请表单数据 |
| flow_nodes | array | 审批流程节点 |
| flow_records | array | 审批操作记录 |
| status | string | 审批状态 |
| created_at | datetime | 提交时间 |
| updated_at | datetime | 更新时间 |

---

## 6. 组件设计

### 6.1 页面组件结构

```
ApprovalsList.vue (页面容器)
├── PageHeader (页面标题组件)
├── FilterSection (筛选区域组件)
├── StatisticsCards (统计卡片组件)
├── ApprovalTabs (Tab切换组件)
├── ApprovalTable (审批列表表格)
│   ├── TableColumn (表格列组件)
│   └── OperationButtons (操作按钮组)
├── ApprovalDetailDialog (审批详情弹窗)
│   ├── FlowTimeline (流程时间线组件)
│   ├── FormPreview (表单预览组件)
│   └── ApprovalActions (审批操作组件)
├── CreateApprovalDialog (新建审批弹窗)
│   ├── TypeSelector (类型选择器)
│   └── FormRenderer (表单渲染器)
└── Pagination (分页组件)
```

### 6.2 核心组件说明

#### ApprovalTable 组件

- **功能**：展示审批列表数据
- **属性**：
  - `data`：审批数据数组
  - `loading`：加载状态
  - `pagination`：分页信息
- **事件**：
  - `view`：查看详情事件
  - `handle`：处理审批事件
  - `page-change`：页码变更事件

#### FlowTimeline 组件

- **功能**：展示审批流程时间线
- **属性**：
  - `nodes`：流程节点数组
  - `currentNodeIndex`：当前节点索引
- **样式**：已完成节点使用成功色，当前节点使用主色，待执行节点使用灰色

#### FormPreview 组件

- **功能**：预览审批申请表单内容
- **属性**：
  - `type`：审批类型
  - `data`：表单数据
- **动态渲染**：根据审批类型动态渲染对应的表单预览组件

---

## 7. 样式设计

### 7.1 页面整体样式

```scss
.approvals-page {
  max-width: 1440px;
  margin: 0 auto;
  padding: 24px;
  
  .page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
  }
  
  .filter-section {
    display: flex;
    gap: 16px;
    margin-bottom: 24px;
    flex-wrap: wrap;
  }
  
  .statistics-cards {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 24px;
  }
  
  .approval-table {
    background: #fff;
    border-radius: 8px;
    overflow: hidden;
  }
  
  .pagination-container {
    display: flex;
    justify-content: center;
    margin-top: 24px;
  }
}
```

### 7.2 状态标签颜色

| 状态 | 背景色 | 文字色 |
|------|--------|--------|
| 待审批 | #FFFBE6 | #D48806 |
| 审批中 | #E6F7FF | #096DD9 |
| 已通过 | #F6FFED | #52C41A |
| 已拒绝 | #FFF2F0 | #CF1322 |
| 已撤销 | #F5F5F5 | #8C8C8C |

### 7.3 响应式设计

| 屏幕宽度 | 布局变化 |
|----------|----------|
| > 1200px | 4列统计卡片，完整表格 |
| 768-1200px | 2列统计卡片，表格横向滚动 |
| < 768px | 1列统计卡片，筛选区域折叠，表格卡片化展示 |

---

## 8. 无障碍性设计

### 8.1 键盘导航

- 所有交互元素可通过Tab键访问
- 快捷键支持：Ctrl+N新建审批，Enter确认操作，Escape关闭弹窗
- 焦点管理：操作完成后焦点返回触发元素

### 8.2 ARIA属性

```vue
<!-- 页面容器 -->
<div role="main" aria-label="审批管理页面">

<!-- 筛选区域 -->
<section aria-label="审批筛选">
  <label for="approval-type">审批类型</label>
  <select id="approval-type">...</select>
</section>

<!-- 统计卡片 -->
<article aria-label="待审批统计">
  <span aria-label="待审批数量：5">5</span>
</article>

<!-- 审批列表 -->
<table role="grid" aria-label="审批列表">
  <thead>...</thead>
  <tbody>...</tbody>
</table>

<!-- 操作按钮 -->
<button aria-label="处理审批">处理</button>
```

### 8.3 颜色对比度

- 所有文字与背景对比度符合WCAG AA标准（≥4.5:1）
- 状态标签使用语义化颜色，并配有文字说明

---

## 9. 测试用例

### 9.1 功能测试

| 测试场景 | 预期结果 |
|----------|----------|
| 进入审批管理页面 | 正确显示统计卡片和审批列表 |
| 选择筛选条件后查询 | 列表显示符合筛选条件的数据 |
| 点击Tab切换 | 切换到对应的审批列表 |
| 点击查看详情 | 弹出审批详情弹窗 |
| 点击处理审批 | 弹出审批详情弹窗并显示操作按钮 |
| 输入意见并点击通过 | 审批通过，列表刷新 |
| 输入意见并点击拒绝 | 审批拒绝，列表刷新 |
| 点击新建审批 | 弹出新建审批弹窗 |
| 选择审批类型并填写表单 | 正确提交审批申请 |

### 9.2 交互测试

| 测试场景 | 预期结果 |
|----------|----------|
| 加载时显示骨架屏 | 正确显示加载状态 |
| 无数据时显示空状态 | 显示"暂无审批"提示 |
| 操作成功后显示提示 | 显示操作成功消息 |
| 操作失败时显示错误 | 显示错误信息 |
| 关闭弹窗后焦点返回 | 焦点正确返回触发元素 |

---

## 10. 验收标准

### 10.1 功能验收

- [ ] 页面正确显示统计卡片
- [ ] 筛选功能正常工作
- [ ] Tab切换正常工作
- [ ] 审批列表正确展示
- [ ] 审批详情弹窗正常显示
- [ ] 审批通过/拒绝操作正常
- [ ] 新建审批功能正常
- [ ] 分页功能正常

### 10.2 交互验收

- [ ] 页面加载流畅，无明显卡顿
- [ ] 动画过渡平滑自然
- [ ] 加载状态清晰可见
- [ ] 操作反馈及时明确
- [ ] 错误提示友好易懂

### 10.3 无障碍验收

- [ ] 键盘导航完整可用
- [ ] ARIA属性正确添加
- [ ] 颜色对比度符合标准
- [ ] 屏幕阅读器兼容

---

## 11. 开发计划

### 11.1 开发顺序

1. 审批列表基础布局和样式
2. 筛选和Tab切换功能
3. 统计卡片功能
4. 审批详情弹窗
5. 审批操作功能
6. 新建审批弹窗
7. API联调和数据展示
8. 测试和优化

### 11.2 预计工时

| 任务 | 预计工时 |
|------|----------|
| 基础布局和样式 | 2小时 |
| 筛选和Tab功能 | 2小时 |
| 统计卡片 | 1小时 |
| 详情弹窗 | 2小时 |
| 操作功能 | 2小时 |
| 新建审批弹窗 | 2小时 |
| API联调 | 2小时 |
| 测试和优化 | 2小时 |
| **总计** | **15小时** |

---

**文档版本**: v1.0  
**最后更新**: 2026-02-10
